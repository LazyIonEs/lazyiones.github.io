<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Android CameraX CameraController | LazyIonEs</title><meta name="author" content="LazyIonEs"><meta name="copyright" content="LazyIonEs"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="å­¦ä¹ CameraControllerçš„ä½¿ç”¨">
<meta property="og:type" content="article">
<meta property="og:title" content="Android CameraX CameraController">
<meta property="og:url" content="https://blog.lazyiones.top/post/23a45cc5c738/index.html">
<meta property="og:site_name" content="LazyIonEs">
<meta property="og:description" content="å­¦ä¹ CameraControllerçš„ä½¿ç”¨">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://blog.lazyiones.top/img/cover/img_cover_58.webp">
<meta property="article:published_time" content="2023-08-30T11:14:58.000Z">
<meta property="article:modified_time" content="2024-12-10T12:40:35.450Z">
<meta property="article:author" content="LazyIonEs">
<meta property="article:tag" content="Android">
<meta property="article:tag" content="CameraX">
<meta property="article:tag" content="Jetpack">
<meta property="article:tag" content="ç›¸æœº">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://blog.lazyiones.top/img/cover/img_cover_58.webp"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Android CameraX CameraController",
  "url": "https://blog.lazyiones.top/post/23a45cc5c738/",
  "image": "https://blog.lazyiones.top/img/cover/img_cover_58.webp",
  "datePublished": "2023-08-30T11:14:58.000Z",
  "dateModified": "2024-12-10T12:40:35.450Z",
  "author": [
    {
      "@type": "Person",
      "name": "LazyIonEs",
      "url": "https://github.com/LazyIonEs"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon.webp"><link rel="canonical" href="https://blog.lazyiones.top/post/23a45cc5c738/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//www.clarity.ms"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google-site-verification" content="7ETsimotwNLa0xM11NCX6CztlOChMBp8fpMyRCD6gXQ"/><meta name="msvalidate.01" content="9D1AA5FD4F3C79F6A6C540B0A0630D85"/><meta name="baidu-site-verification" content="codeva-THzCML9R7U"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          const mediaQueryDark = window.matchMedia('(prefers-color-scheme: dark)')
          const mediaQueryLight = window.matchMedia('(prefers-color-scheme: light)')
          
          if (theme === undefined) {
            if (mediaQueryLight.matches) activateLightMode()
            else if (mediaQueryDark.matches) activateDarkMode()
            else {
              const hour = new Date().getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            mediaQueryDark.addEventListener('change', () => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else {
            theme === 'light' ? activateLightMode() : activateDarkMode()
          }
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?23fd4e19913bb67eb29cf59230d370d6";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
btf.addGlobalFn('pjaxComplete', () => {
  _hmt.push(['_trackPageview',window.location.pathname])
}, 'baidu_analytics')
</script><script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-C38GJKZQSF"></script><script>window.dataLayer = window.dataLayer || []
function gtag(){dataLayer.push(arguments)}
gtag('js', new Date())
gtag('config', 'G-C38GJKZQSF')
btf.addGlobalFn('pjaxComplete', () => {
  gtag('config', 'G-C38GJKZQSF', {'page_path': window.location.pathname})
}, 'google_analytics')
</script><script>(function(c,l,a,r,i,t,y){
    c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
    t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
    y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
})(window, document, "clarity", "script", "pbky20qpzk");</script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"æœªæ‰¾åˆ°ç¬¦åˆæ‚¨æŸ¥è¯¢çš„å†…å®¹ï¼š${query}","hits_stats":"å…±æ‰¾åˆ° ${hits} ç¯‡æ–‡ç« "}},
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":true,"highlightMacStyle":true},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶å¤±è´¥',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"å·²åˆ‡æ¢ä¸ºç¹ä½“ä¸­æ–‡","cht_to_chs":"å·²åˆ‡æ¢ä¸ºç®€ä½“ä¸­æ–‡","day_to_night":"å·²åˆ‡æ¢ä¸ºæ·±è‰²æ¨¡å¼","night_to_day":"å·²åˆ‡æ¢ä¸ºæµ…è‰²æ¨¡å¼","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"bottom-left"},
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: 'åŠ è½½æ›´å¤š'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Android CameraX CameraController',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><meta name="generator" content="Hexo 7.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/avatar.webp" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">12</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">19</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">20</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> æ—¶é—´è½´</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa fa-heartbeat"></i><span> å¨±ä¹</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> ç›¸å†Œ</span></a></li><li><a class="site-page child" href="/bangumis/"><i class="fa-fw fa-brands fa-youtube"></i><span> ç•ªå‰§</span></a></li><li><a class="site-page child" href="/cinemas/"><i class="fa-fw fa-brands fa-youtube"></i><span> è¿½å‰§</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> å…³äº</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(/img/top_banner_2.webp);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">LazyIonEs</span></a><a class="nav-page-title" href="/"><span class="site-name">Android CameraX CameraController</span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> æœç´¢</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> æ—¶é—´è½´</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa fa-heartbeat"></i><span> å¨±ä¹</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> ç›¸å†Œ</span></a></li><li><a class="site-page child" href="/bangumis/"><i class="fa-fw fa-brands fa-youtube"></i><span> ç•ªå‰§</span></a></li><li><a class="site-page child" href="/cinemas/"><i class="fa-fw fa-brands fa-youtube"></i><span> è¿½å‰§</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> å…³äº</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">Android CameraX CameraController</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2023-08-30T11:14:58.000Z" title="å‘è¡¨äº 2023-08-30 19:14:58">2023-08-30</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2024-12-10T12:40:35.450Z" title="æ›´æ–°äº 2024-12-10 20:40:35">2024-12-10</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Android/">Android</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Android/CameraX/">CameraX</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">æµè§ˆé‡:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><p><a target="_blank" rel="noopener" href="https://developer.android.com/training/camerax">CameraX</a> currently provides <code>CameraView</code>, a <code>View</code> that displays a preview of the camera, while also providing methods to take pictures, control the camera, and query camera information. <code>CameraView</code> clearly takes on more responsibilities than a <code>View</code> should, as it participates in the <code>View</code> hierarchy and displays content, while also owning camera resources that exist outside the scope and lifecycle of the <code>View</code> hierarchy.</p>
<p><code>CameraView</code> violates the separation of concerns principle, making it harder to guarantee its robustness in all corner cases. As a result, it will be marked as deprecated and removed before CameraXâ€™s view artifact reaches Beta. It has been split up into two parts that you should use instead: <code>PreviewView</code> which handles its view-related tasks, and <code>CameraController</code> which handles the camera operations.</p>
<p><code>PreviewView</code> has been available in CameraXâ€™s view artifact for a while. <code>CameraController</code>, however, was introduced recently in version alpha19. Itâ€™s a high-level, all-in-one API that provides a way to easily access and manipulate core camera features, including displaying a camera preview, taking a picture, and analyzing camera frames. It does so while matching the output of its use cases to the viewfinderâ€™s preview, thus providing a â€œWhat You See Is What You Getâ€ (WYSIWYG) experience, a highly requested feature by developers that makes CameraXâ€™s usage very intuitive. It also takes care of initializing the camera and adapting its output to device rotation.</p>
<p>To offload the burden of starting, stopping, and closing the camera, CameraX also introduced <code>LifecycleCameraController</code>, which offers all the convenience of <code>CameraController</code> with the added benefit of binding the cameraâ€™s lifecycle to that of a <code>LifecycleOwner</code>, typically the lifecycle of a <code>Fragment</code> or <code>Activity</code>. This allows the lifecycleâ€™s state to control when the camera is opened, stopped, and closed.</p>
<p>Using <code>PreviewView</code> with <code>CameraController</code> is fairly simple, and can be done as follows:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Set up the CameraController</span></span><br><span class="line"><span class="keyword">val</span> cameraController = LifecycleCameraController(context)</span><br><span class="line">cameraController.bindToLifecycle(lifecycleOwner)</span><br><span class="line"></span><br><span class="line"><span class="comment">// Attach the CameraController to PreviewView</span></span><br><span class="line"><span class="keyword">val</span> previewView = findViewById(R.id.preview_view)</span><br><span class="line">previewView.setController(cameraController)</span><br><span class="line"></span><br><span class="line"><span class="comment">// Use the CameraController</span></span><br><span class="line">cameraController.takePicture(â€¦)</span><br></pre></td></tr></table></figure>

<p>The following sections list the mappings from <code>CameraView</code> to <code>CameraController</code>. You can use them to migrate from <code>CameraView</code> to <code>PreviewView</code> and <code>CameraController</code>.</p>
<h1 id="Camera-Initialization"><a href="#Camera-Initialization" class="headerlink" title="Camera Initialization"></a>Camera Initialization</h1><table>
<thead>
<tr>
<th align="left">CameraView</th>
<th align="left">CameraController</th>
</tr>
</thead>
<tbody><tr>
<td align="left">-</td>
<td align="left">getInitializationFuture()</td>
</tr>
</tbody></table>
<p>Unlike <code>CameraView</code>, <code>CameraController</code> provides a <code>ListenableFuture</code> to monitor its initialization. Itâ€™s an asynchronous operation during which <code>CameraController</code> initializes CameraX and binds its use cases. The benefit of using this <code>ListenableFuture</code> is twofold:</p>
<ul>
<li>Once it successfully completes, you can allow your users to start interacting with the camera, for example by taking pictures and zooming in and out of the viewfinder.</li>
<li>In case it fails, you can gracefully handle the error and communicate it to your users.</li>
</ul>
<p>In case you arenâ€™t familiar with <code>ListenableFuture</code>: it wraps an asynchronous operation and allows you to attach a listener thatâ€™s invoked on its completion. In case the operation has already finished, the future returns immediately.</p>
<h1 id="Camera-Lifecycle"><a href="#Camera-Lifecycle" class="headerlink" title="Camera Lifecycle"></a>Camera Lifecycle</h1><table>
<thead>
<tr>
<th align="left">CameraView</th>
<th align="left">LifecycleCameraController</th>
</tr>
</thead>
<tbody><tr>
<td align="left">bindToLifecycle(LifecycleOwner)</td>
<td align="left">bindToLifecycle(LifecycleOwner)</td>
</tr>
</tbody></table>
<p>Similar to <code>CameraView</code>, <code>LifecycleCameraController</code> ties control of the camera to a lifecycle. You must bind a valid <code>LifecycleOwner</code> to the controller for it to be operational.</p>
<p><code>LifecycleCameraController</code> provides an additional <code>unbind()</code> method which allows you to prematurely close the camera before the lifecycle that itâ€™s bound to comes to an end. This is useful in cases in which the camera isnâ€™t integral to a screen and isnâ€™t needed for its entire lifecycle. Alternatively, you can define your custom <code>LifecycleOwner</code> to control when to close the camera, but <code>unbind()</code> can be more convenient in some cases.</p>
<h1 id="Camera-Control"><a href="#Camera-Control" class="headerlink" title="Camera Control"></a>Camera Control</h1><h2 id="Zoom"><a href="#Zoom" class="headerlink" title="- Zoom"></a><strong>- Zoom</strong></h2><table>
<thead>
<tr>
<th align="left">CameraView</th>
<th align="left">CameraController</th>
</tr>
</thead>
<tbody><tr>
<td align="left">isZoomSupported()</td>
<td align="left">-</td>
</tr>
<tr>
<td align="left">isPinchToZoomEnabled()</td>
<td align="left">isPinchToZoomEnabled()</td>
</tr>
<tr>
<td align="left">setPinchToZoomEnabled(Boolean)</td>
<td align="left">setPinchToZoomEnabled(Boolean)</td>
</tr>
<tr>
<td align="left">getZoomRatio()</td>
<td align="left">getZoomState().getZoomRatio()</td>
</tr>
<tr>
<td align="left">getMinZoomRatio()</td>
<td align="left">getZoomState().getMinZoomRatio()</td>
</tr>
<tr>
<td align="left">getMaxZoomRatio()</td>
<td align="left">getZoomState().getMaxZoomRatio()</td>
</tr>
<tr>
<td align="left">-</td>
<td align="left">getZoomState().getLinearZoom()</td>
</tr>
<tr>
<td align="left">setZoomRatio(float)</td>
<td align="left">setZoomRatio(float)</td>
</tr>
<tr>
<td align="left">-</td>
<td align="left">setLinearZoom(float)</td>
</tr>
</tbody></table>
<p><code>CameraController</code> allows you to observe the cameraâ€™s zoom state via a <code>LiveData</code> instance. This state becomes available once the camera is open, and holds both static information, like the maximum and minimum zoom ratios, and dynamic information, like the current zoom ratio. You can verify whether zoom is supported using the maximum zoom ratio as follows:</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> isZoomSupported = getZoomState().getValue().getMaxZoomRatio() != <span class="number">1</span></span><br></pre></td></tr></table></figure>

<p><code>CameraController</code> additionally provides methods to get and set linear zoom, which can vary between 0 (minimum zoom) and 1 (maximum zoom).</p>
<p>Finally, like <code>CameraView</code>, <code>CameraController</code> allows you to enable or disable pinch-to-zoom. When enabled, <code>CameraController</code> handles pinch gestures on its attached <code>PreviewView</code> to zoom the camera in and out.</p>
<table>
<thead>
<tr>
<th align="left">CameraView</th>
<th align="left">CameraController</th>
</tr>
</thead>
<tbody><tr>
<td align="left">enableTorch(boolean)</td>
<td align="left">enableTorch(boolean)</td>
</tr>
<tr>
<td align="left">isTorchOn()</td>
<td align="left">getTorchState()</td>
</tr>
<tr>
<td align="left">getFlash()</td>
<td align="left">getImageCaptureFlashMode()</td>
</tr>
<tr>
<td align="left">setFlash(int)</td>
<td align="left">setImageCaptureFlashMode(int)</td>
</tr>
</tbody></table>
<p><code>CameraController</code> provides similar methods as <code>CameraView</code> to set and query the image captureâ€™s flash mode, but unlike <code>CameraView</code>, it allows observing changes in the cameraâ€™s torch state via a <code>LiveData</code> instance, which emits <code>TorchState.OFF</code> and <code>TorchState.ON</code>.</p>
<h2 id="Focus-Metering"><a href="#Focus-Metering" class="headerlink" title="- Focus&#x2F;Metering"></a>- Focus&#x2F;Metering</h2><table>
<thead>
<tr>
<th align="left">CameraView</th>
<th align="left">CameraController</th>
</tr>
</thead>
<tbody><tr>
<td align="left">-</td>
<td align="left">isTapToFocusEnabled()</td>
</tr>
<tr>
<td align="left">-</td>
<td align="left">setTapToFocusEnabled(boolean)</td>
</tr>
</tbody></table>
<p>While <code>CameraView</code> automatically acquires focus on any region of the viewfinder that is tapped, <code>CameraController</code> provides more flexibility by allowing you to enable or disable tap-to-focus functionality. When enabled, <code>CameraController</code> handles touch events on its attached <code>PreviewView</code> by focusing the camera on tapped regions.</p>
<h1 id="Camera-Selection"><a href="#Camera-Selection" class="headerlink" title="Camera Selection"></a>Camera Selection</h1><table>
<thead>
<tr>
<th align="left">CameraView</th>
<th align="left">LifecycleCameraController</th>
</tr>
</thead>
<tbody><tr>
<td align="left">hasCameraWithLensFacing(int)</td>
<td align="left">hasCamera(CameraSelector)</td>
</tr>
<tr>
<td align="left">setCameraLensFacing(Integer)</td>
<td align="left">setCameraSelector(CameraSelector)</td>
</tr>
<tr>
<td align="left">getCameraLensFacing()</td>
<td align="left">getCameraSelector()</td>
</tr>
<tr>
<td align="left">toggleCamera()</td>
<td align="left">-</td>
</tr>
</tbody></table>
<p><code>CameraController</code> provides you with more control over which camera to use by allowing you to specify a <code>CameraSelector</code> to select the camera it uses. This allows you to rotate between various cameras when toggling cameras, instead of only the default front and back cameras, which was a limitation of <code>CameraView.toggleCamera()</code>. You can still implement this fairly easily, though, using <code>CameraController</code> as follows.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">fun</span> <span class="title">toggleCamera</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (cameraController.cameraSelector == CameraSelector.DEFAULT_BACK_CAMERA </span><br><span class="line">        &amp;&amp; cameraController.hasCamera(CameraSelector.DEFAULT_FRONT_CAMERA) &#123;</span><br><span class="line">        cameraController.cameraSelector = CameraSelector.DEFAULT_FRONT_CAMERA</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (cameraController.cameraSelector == CameraSelector.DEFAULT_FRONT_CAMERA </span><br><span class="line">               &amp;&amp; cameraController.hasCamera(CameraSelector.DEFAULT_BACK_CAMERA) &#123;</span><br><span class="line">        cameraController.cameraSelector = CameraSelector.DEFAULT_BACK_CAMERA</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Camera-Use-Cases"><a href="#Camera-Use-Cases" class="headerlink" title="Camera Use Cases"></a>Camera Use Cases</h1><table>
<thead>
<tr>
<th align="left">CameraView</th>
<th align="left">CameraController</th>
</tr>
</thead>
<tbody><tr>
<td align="left">getCaptureMode()</td>
<td align="left">isImageCaptureEnabled()</td>
</tr>
<tr>
<td align="left">-</td>
<td align="left">isImageAnalysisEnabled()</td>
</tr>
<tr>
<td align="left">setCaptureMode(CaptureMode)</td>
<td align="left">setEnabledUseCases(int)</td>
</tr>
</tbody></table>
<p><code>CameraController</code> supports all of CameraXâ€™s <a target="_blank" rel="noopener" href="https://developer.android.com/training/camerax/architecture#structure">use cases</a>: <code>Preview</code>, <code>ImageAnalysis</code>, and <code>ImageCapture</code>, thus making it a more robust camera solution compared to <code>CameraView</code>. It also matches the output of <code>ImageAnalysis</code> and <code>ImageCapture</code> to the previewâ€™s display, thereby providing a WYSIWYG experience.</p>
<p><code>CameraController</code>â€™s default state enables preview, image analysis, and image capture. The <code>Preview</code> use case is <strong>always</strong> enabled, so you can choose the remaining use cases to enable or disable depending on your camera usage needs.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Enable image capture, equivalent to cameraView.setCaptureMode(IMAGE)</span></span><br><span class="line"><span class="comment">// CameraController&#x27;s enabled use cases: Preview + ImageCapture</span></span><br><span class="line">cameraController.setEnabledUseCases(IMAGE_CAPTURE)</span><br><span class="line"></span><br><span class="line"><span class="comment">// Enable image capture and image analysis</span></span><br><span class="line"><span class="comment">// CameraController&#x27;s enabled use cases: Preview + ImageCapture + ImageAnalysis</span></span><br><span class="line">cameraController.setEnabledUseCases(IMAGE_CAPTURE|IMAGE_ANALYSIS)</span><br></pre></td></tr></table></figure>

<h2 id="Preview"><a href="#Preview" class="headerlink" title="- Preview"></a>- Preview</h2><table>
<thead>
<tr>
<th align="left">CameraView</th>
<th align="left">CameraController</th>
</tr>
</thead>
<tbody><tr>
<td align="left">getPreviewStreamState()</td>
<td align="left">Call directly on associated PreviewView</td>
</tr>
<tr>
<td align="left">getScaleType()</td>
<td align="left">Call directly on associated PreviewView</td>
</tr>
<tr>
<td align="left">setScaleType(ScaleType)</td>
<td align="left">Call directly on associated PreviewView</td>
</tr>
</tbody></table>
<p>Unlike <code>CameraView</code> which wraps (and thus hides) a <code>PreviewView</code> instance and forwards method calls to it, <code>CameraController</code> is decoupled from <code>PreviewView</code>. This means you have more control over the viewfinder, and can access and manipulate it directly.</p>
<h2 id="ImageAnalysis"><a href="#ImageAnalysis" class="headerlink" title="- ImageAnalysis"></a>- ImageAnalysis</h2><table>
<thead>
<tr>
<th align="left">CameraView</th>
<th align="left">CameraController</th>
</tr>
</thead>
<tbody><tr>
<td align="left">-</td>
<td align="left">setImageAnalysisAnalyzer(Executor, Analyzer)</td>
</tr>
<tr>
<td align="left">-</td>
<td align="left">clearImageAnalysisAnalyzer()</td>
</tr>
<tr>
<td align="left">-</td>
<td align="left">getImageAnalysisBackpressureStrategy()</td>
</tr>
<tr>
<td align="left">-</td>
<td align="left">setImageAnalysisBackpressureStrategy(int)</td>
</tr>
<tr>
<td align="left">-</td>
<td align="left">getImageAnalysisImageQueueDepth()</td>
</tr>
<tr>
<td align="left">-</td>
<td align="left">setImageAnalysisImageQueueDepth(int)</td>
</tr>
</tbody></table>
<p>Unlike <code>CameraView</code>, <code>CameraController</code> supports the <code>ImageAnalysis</code> use case. You can set and clear its <code>Analyzer</code>, while also configuring its image-processing pipeline.</p>
<h2 id="ImageCapture"><a href="#ImageCapture" class="headerlink" title="- ImageCapture"></a>- ImageCapture</h2><table>
<thead>
<tr>
<th align="left">CameraView</th>
<th align="left">CameraController</th>
</tr>
</thead>
<tbody><tr>
<td align="left">takePicture(Executor, OnImageCapturedCallback)</td>
<td align="left">takePicture(Executor, OnImageCapturedCallback)</td>
</tr>
<tr>
<td align="left">takePicture(OutputFileOptions, Executor, OnImageSavedCallback)</td>
<td align="left">takePicture(OutputFileOptions, Executor, OnImageSavedCallback)</td>
</tr>
</tbody></table>
<p><code>CameraController</code> provides the same methods as <code>CameraView</code> to take a picture, specify the image save destination, and provide the image capture callbacks.</p>
<p><em>One thing to note is that</em> <code>*CameraController*</code> <em>mirrors an image captured with a front-facing camera, unless you disable this in the</em> <code>*OutputFileOptions*</code><em>â€™s metadata by calling</em> <code>*Metadata.setReversedHorizontal(false)*</code>.</p>
<h1 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h1><p>In summary:</p>
<ul>
<li>Because <code>CameraView</code> is handling the responsibilities of both a view and a controller in the MVC sense, CameraX is deprecating it and splitting it into <code>PreviewView</code> and the newly introduced <code>CameraController</code>.</li>
<li><code>CameraController</code> handles camera initialization, as well as the creation and configuration of its use cases.</li>
<li><code>CameraController</code> provides a WYSIWYG experience by matching the output of its use cases to <code>PreviewView</code>â€™s display.</li>
<li><code>CameraController</code> listens to the deviceâ€™s motion sensor to correctly rotate the output of its use cases.</li>
<li><code>CameraController</code> adds support for the <code>ImageAnalysis</code> use case, making it a more robust camera solution that provides easy access to all of CameraXâ€™s use cases.</li>
<li><code>CameraController</code> supports all of <code>CameraView</code>â€™s features and more, such as enabling and disabling tap-to-focus, getting and setting linear zoom, and observing dynamic camera information like the zoom and torch states.</li>
<li><code>LifecycleCameraController</code> is a <code>CameraController</code> that binds the cameraâ€™s lifecycle to that of a <code>LifecycleOwner</code>, typically the lifecycle of the UI.</li>
</ul>
<p>Want more CameraX goodness? Check out:</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://developer.android.com/training/camerax">Official CameraX documentation</a></li>
<li><a target="_blank" rel="noopener" href="https://codelabs.developers.google.com/codelabs/camerax-getting-started">Guided CameraX introduction codelab</a></li>
<li><a target="_blank" rel="noopener" href="https://groups.google.com/a/android.com/g/camerax-developers">CameraX developer community</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/android/camera-samples/tree/master/CameraXBasic">CameraX official sample app</a></li>
</ul>
<p>è½¬è½½è‡³<a target="_blank" rel="noopener" href="https://medium.com/androiddevelopers/camerax-learn-how-to-use-cameracontroller-e3ed10fffecf">medium.com</a></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>æ–‡ç« ä½œè€…: </span><span class="post-copyright-info"><a target="_blank" rel="noopener" href="https://github.com/LazyIonEs">LazyIonEs</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>æ–‡ç« é“¾æ¥: </span><span class="post-copyright-info"><a href="https://blog.lazyiones.top/post/23a45cc5c738/">https://blog.lazyiones.top/post/23a45cc5c738/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>ç‰ˆæƒå£°æ˜: </span><span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥æº <a href="https://blog.lazyiones.top" target="_blank">LazyIonEs</a>ï¼</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Android/">Android</a><a class="post-meta__tags" href="/tags/CameraX/">CameraX</a><a class="post-meta__tags" href="/tags/Jetpack/">Jetpack</a><a class="post-meta__tags" href="/tags/%E7%9B%B8%E6%9C%BA/">ç›¸æœº</a></div><div class="post-share"><div class="social-share" data-image="/img/cover/img_cover_58.webp" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/post/60146888dfeb/" title="è‡ªå®šä¹‰Viewçš„æµç¨‹"><img class="cover" src="/img/cover/img_cover_17.webp" onerror="onerror=null;src='/img/404.webp'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">ä¸Šä¸€ç¯‡</div><div class="info-item-2">è‡ªå®šä¹‰Viewçš„æµç¨‹</div></div><div class="info-2"><div class="info-item-1">è‡ªå®šä¹‰Viewæ˜¯ä¸€ä¸ªè€ç”Ÿå¸¸è°ˆçš„é—®é¢˜ï¼Œå¯¹äºä¸€ä¸ªAndroidå¼€å‘è€…æ¥è¯´æ˜¯å¿…é¡»æŒæ¡çš„çŸ¥è¯†ç‚¹ï¼Œä¹Ÿæ˜¯Androidå¼€å‘è¿›é˜¶çš„å¿…ç»ä¹‹è·¯ã€‚</div></div></div></a><a class="pagination-related" href="/post/19ec2a0f554a/" title="HomeBrewå¸¸ç”¨æŒ‡ä»¤"><img class="cover" src="/img/cover/img_cover_82.webp" onerror="onerror=null;src='/img/404.webp'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">ä¸‹ä¸€ç¯‡</div><div class="info-item-2">HomeBrewå¸¸ç”¨æŒ‡ä»¤</div></div><div class="info-2"><div class="info-item-1">HomeBrewå¸¸ç”¨æŒ‡ä»¤</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>ç›¸å…³æ¨è</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/post/acb365736e83/" title="Android CameraXä¸­ä½¿ç”¨Camera2"><img class="cover" src="/img/cover/img_cover_29.webp" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-08-15</div><div class="info-item-2">Android CameraXä¸­ä½¿ç”¨Camera2</div></div><div class="info-2"><div class="info-item-1">å‰è¨€CameraX åŸºäº Camera2 æ„å»ºè€Œæˆï¼Œå¹¶ä¸” CameraX æä¾›äº†åœ¨ Camera2 å®ç°ä¸­è¯»å–ç”šè‡³å†™å…¥å±æ€§çš„æ–¹å¼ã€‚å¦‚éœ€äº†è§£å®Œæ•´è¯¦æƒ…ï¼Œè¯·å‚é˜…äº’æ“ä½œæ€§è½¯ä»¶åŒ…ã€‚ é‚£ä¹ˆè¯¥å¦‚ä½•ä½¿ç”¨å‘¢ æ³¨æ„ï¼šåœ¨ CameraX ä¸­ï¼Œè®¾ç½®åº•å±‚ Camera2 å±æ€§ä¼šè¢«æ ‡è®°ä¸ºâ€œå®éªŒæ€§â€ï¼Œå› ä¸º Google å¸Œæœ›å¼€å‘è€…èƒ½äº†è§£å…¶ä½¿ç”¨æƒ…å†µã€‚æ‚¨è®¾ç½®çš„å€¼ä¼šæ›¿æ¢ CameraX æ‰€è®¾ç½®çš„ä»»ä½•å€¼ã€‚æˆ‘ä»¬å»ºè®®æ‚¨ä»…åœ¨ç»å¯¹å¿…è¦æ—¶æ‰§è¡Œæ­¤æ“ä½œï¼Œä¹Ÿå»ºè®®åœ¨æ‚¨è¿™ä¸€ç«¯è¿›è¡Œå…¶ä»–æµ‹è¯•ã€‚ Camera2CameraInfoä½¿ç”¨ Camera2CameraInfo è¯»å–åº•å±‚ CameraCharacteristics 12345val c2ci = Camera2CameraInfo.from(cameraInfo)c2ci.apply &#123;    // è·å–è®¾å¤‡æ”¯æŒçš„ç¡¬ä»¶çº§åˆ«    val level = getCameraCharacteristic(CameraCharacteristics.INFO_SUPPORTED_HARDWARE_LEVEL) ?:...</div></div></div></a><a class="pagination-related" href="/post/d42c635de009/" title="Android CameraXçš„åŸºæœ¬ä½¿ç”¨"><img class="cover" src="/img/cover/img_cover_26.webp" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-08-14</div><div class="info-item-2">Android CameraXçš„åŸºæœ¬ä½¿ç”¨</div></div><div class="info-2"><div class="info-item-1">å‰è¨€è™½ç„¶ç½‘ä¸Šæœ‰å¾ˆå¤šCameraXçš„æ•™ç¨‹ï¼Œä½†æ˜¯æ¯æ¬¡ç”¨CameraXçš„æ—¶å€™æ€»è¦åœ¨ç¿»ä¸€ç¿»å®˜æ–¹çš„æ–‡æ¡£æˆ–è€…ç½‘ä¸Šçš„æ•™ç¨‹ä¹‹ç±»çš„ï¼Œè¿™æ¬¡å°±è‡ªå·±è®°ä¸€ä¸‹å§ï¼Œç¿»è‡ªå·±çš„æ€»æ¯”ç¿»åˆ«äººçš„å¥½å§ğŸ¤ª å£°æ˜ä¾èµ–é¡¹è¦æ·»åŠ  CameraX çš„ä¾èµ–é¡¹ï¼Œæ‚¨å¿…é¡»å°† Google Maven ä»£ç åº“æ·»åŠ åˆ°é¡¹ç›®ä¸­ã€‚ æ‰“å¼€é¡¹ç›®çš„ settings.gradle æ–‡ä»¶å¹¶æ·»åŠ  google() ä»£ç åº“ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š GroovyKotlin1234567dependencyResolutionManagement &#123;    repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)    repositories &#123;        google()        mavenCentral()    &#125;&#125;1234567dependencyResolutionManagement &#123;    repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)   ...</div></div></div></a><a class="pagination-related" href="/post/ff27f992da35/" title="ã€è‡ªå®šä¹‰ Viewã€‘ç›¸æœºé¢„è§ˆç‚¹å‡»èšç„¦æ¡†(å¸¦å¯¹ç„¦åŠ¨ç”»ï¼Œæ›å…‰è°ƒæ•´)"><img class="cover" src="/img/cover/img_cover_35.webp" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-05-05</div><div class="info-item-2">ã€è‡ªå®šä¹‰ Viewã€‘ç›¸æœºé¢„è§ˆç‚¹å‡»èšç„¦æ¡†(å¸¦å¯¹ç„¦åŠ¨ç”»ï¼Œæ›å…‰è°ƒæ•´)</div></div><div class="info-2"><div class="info-item-1">æ—¶éš”åä¸ªæœˆï¼Œä»Šå¤©å†æ¬¡æ¥åˆ†äº«é¡¹ç›®ä¸­ä½¿ç”¨åˆ°çš„è‡ªå®šä¹‰Viewï¼Œè¯ä¸å¤šè¯´ï¼Œç›´æ¥å¼€å§‹ï¼Œä¸»è¦åœ¨ç›¸æœºé¢„è§ˆçš„æ—¶å€™ç‚¹å‡»é¢„è§ˆç•Œé¢å¯¹ç„¦æ—¶ä½¿ç”¨ï¼Œå¹¶å¢åŠ äº†å¯¹ç„¦åŠ¨ç”»ï¼Œå¯è°ƒèŠ‚æ›å…‰ã€‚</div></div></div></a><a class="pagination-related" href="/post/b9b336b8fcde/" title="ä½¿ç”¨ sourceSets ç®¡ç†é£å‘³ç‰¹å®šçš„ AndroidManifest.xml"><img class="cover" src="/img/cover/img_cover_40.webp" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2023-08-04</div><div class="info-item-2">ä½¿ç”¨ sourceSets ç®¡ç†é£å‘³ç‰¹å®šçš„ AndroidManifest.xml</div></div><div class="info-2"><div class="info-item-1">å­¦ä¹ å¦‚ä½•ä½¿ç”¨ sourceSets ç®¡ç†é£å‘³ç‰¹å®šçš„ AndroidManifest.xml é…ç½®</div></div></div></a><a class="pagination-related" href="/post/1c9dce3f7f08/" title="ApkVerifierçš„ä½¿ç”¨"><img class="cover" src="/img/cover/img_cover_30.webp" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-02-14</div><div class="info-item-2">ApkVerifierçš„ä½¿ç”¨</div></div><div class="info-2"><div class="info-item-1">æœ¬æ–‡ä»‹ç»å¦‚ä½•ä½¿ç”¨ApkVerifierè·å–APKçš„ç­¾åä¿¡æ¯ã€‚</div></div></div></a><a class="pagination-related" href="/post/b7fe50ab03ac/" title="ä½¿ç”¨Compose Desktopå¼€å‘ä¸€æ¬¾é€‚ç”¨äºå®‰å“å¼€å‘çš„æ¡Œé¢å·¥å…·"><img class="cover" src="/img/cover/img_cover_77.webp" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-03-11</div><div class="info-item-2">ä½¿ç”¨Compose Desktopå¼€å‘ä¸€æ¬¾é€‚ç”¨äºå®‰å“å¼€å‘çš„æ¡Œé¢å·¥å…·</div></div><div class="info-2"><div class="info-item-1">ä½¿ç”¨Compose Desktopå¼€å‘çš„ç¬¬ä¸€æ¬¾æ¡Œé¢å·¥å…·ã€å†…ç½®å¤šç§åŠŸèƒ½ï¼Œæ”¯æŒMacã€Windowså’ŒLinux</div></div></div></a></div></div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> è¯„è®º</span></div></div><div class="comment-wrap"><div><div id="waline-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/avatar.webp" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">LazyIonEs</div><div class="author-info-description">å­¦ä¹ Androidä¸¤å¹´åŠçš„Androidå¼€å‘å®ä¹ ç”Ÿ</div><div class="site-data"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">12</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">19</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">20</div></a></div><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/lazyiones" target="_blank" title="Github '#24292e'"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:lazyiones@gmail.com" target="_blank" title="Email '#4a7dbe'"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>å…¬å‘Š</span></div><div class="announcement_content">å¦‚æœé˜…è¯»è¿‡ç¨‹ä¸­é‡åˆ°äº†é—®é¢˜ï¼Œè¯·åŠæ—¶è¯„è®ºæˆ–è€…ç•™è¨€ï¼Œçœ‹åˆ°äº†ä¼šåœ¨ç¬¬ä¸€æ—¶é—´ç»™å‡ºå›å¤ã€‚</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Camera-Initialization"><span class="toc-number">1.</span> <span class="toc-text">Camera Initialization</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Camera-Lifecycle"><span class="toc-number">2.</span> <span class="toc-text">Camera Lifecycle</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Camera-Control"><span class="toc-number">3.</span> <span class="toc-text">Camera Control</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Zoom"><span class="toc-number">3.1.</span> <span class="toc-text">- Zoom</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Focus-Metering"><span class="toc-number">3.2.</span> <span class="toc-text">- Focus&#x2F;Metering</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Camera-Selection"><span class="toc-number">4.</span> <span class="toc-text">Camera Selection</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Camera-Use-Cases"><span class="toc-number">5.</span> <span class="toc-text">Camera Use Cases</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Preview"><span class="toc-number">5.1.</span> <span class="toc-text">- Preview</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ImageAnalysis"><span class="toc-number">5.2.</span> <span class="toc-text">- ImageAnalysis</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ImageCapture"><span class="toc-number">5.3.</span> <span class="toc-text">- ImageCapture</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Conclusion"><span class="toc-number">6.</span> <span class="toc-text">Conclusion</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>æœ€æ–°æ–‡ç« </span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/post/87b74aa10272/" title="Gitå¸¸ç”¨æŒ‡ä»¤"><img src="/img/cover/img_cover_12.webp" onerror="this.onerror=null;this.src='/img/404.webp'" alt="Gitå¸¸ç”¨æŒ‡ä»¤"/></a><div class="content"><a class="title" href="/post/87b74aa10272/" title="Gitå¸¸ç”¨æŒ‡ä»¤">Gitå¸¸ç”¨æŒ‡ä»¤</a><time datetime="2025-01-06T11:50:04.000Z" title="å‘è¡¨äº 2025-01-06 19:50:04">2025-01-06</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/b7fe50ab03ac/" title="ä½¿ç”¨Compose Desktopå¼€å‘ä¸€æ¬¾é€‚ç”¨äºå®‰å“å¼€å‘çš„æ¡Œé¢å·¥å…·"><img src="/img/cover/img_cover_77.webp" onerror="this.onerror=null;this.src='/img/404.webp'" alt="ä½¿ç”¨Compose Desktopå¼€å‘ä¸€æ¬¾é€‚ç”¨äºå®‰å“å¼€å‘çš„æ¡Œé¢å·¥å…·"/></a><div class="content"><a class="title" href="/post/b7fe50ab03ac/" title="ä½¿ç”¨Compose Desktopå¼€å‘ä¸€æ¬¾é€‚ç”¨äºå®‰å“å¼€å‘çš„æ¡Œé¢å·¥å…·">ä½¿ç”¨Compose Desktopå¼€å‘ä¸€æ¬¾é€‚ç”¨äºå®‰å“å¼€å‘çš„æ¡Œé¢å·¥å…·</a><time datetime="2024-03-11T02:46:01.000Z" title="å‘è¡¨äº 2024-03-11 10:46:01">2024-03-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/1c9dce3f7f08/" title="ApkVerifierçš„ä½¿ç”¨"><img src="/img/cover/img_cover_30.webp" onerror="this.onerror=null;this.src='/img/404.webp'" alt="ApkVerifierçš„ä½¿ç”¨"/></a><div class="content"><a class="title" href="/post/1c9dce3f7f08/" title="ApkVerifierçš„ä½¿ç”¨">ApkVerifierçš„ä½¿ç”¨</a><time datetime="2024-02-14T05:28:36.000Z" title="å‘è¡¨äº 2024-02-14 13:28:36">2024-02-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/088f7ba1ef7c/" title="æ·±å…¥ç†è§£Androidä¸­çš„è‡ªå®šä¹‰å±æ€§"><img src="/img/cover/img_cover_74.webp" onerror="this.onerror=null;this.src='/img/404.webp'" alt="æ·±å…¥ç†è§£Androidä¸­çš„è‡ªå®šä¹‰å±æ€§"/></a><div class="content"><a class="title" href="/post/088f7ba1ef7c/" title="æ·±å…¥ç†è§£Androidä¸­çš„è‡ªå®šä¹‰å±æ€§">æ·±å…¥ç†è§£Androidä¸­çš„è‡ªå®šä¹‰å±æ€§</a><time datetime="2024-01-10T11:52:04.000Z" title="å‘è¡¨äº 2024-01-10 19:52:04">2024-01-10</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/60146888dfeb/" title="è‡ªå®šä¹‰Viewçš„æµç¨‹"><img src="/img/cover/img_cover_17.webp" onerror="this.onerror=null;this.src='/img/404.webp'" alt="è‡ªå®šä¹‰Viewçš„æµç¨‹"/></a><div class="content"><a class="title" href="/post/60146888dfeb/" title="è‡ªå®šä¹‰Viewçš„æµç¨‹">è‡ªå®šä¹‰Viewçš„æµç¨‹</a><time datetime="2023-12-23T08:14:46.000Z" title="å‘è¡¨äº 2023-12-23 16:14:46">2023-12-23</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url(/img/footer_bg.webp);"><div id="footer-wrap"><div class="copyright">&copy;2023 - 2025 By LazyIonEs</div><div class="framework-info"><span>æ¡†æ¶ </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>ä¸»é¢˜ </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="æ—¥é—´å’Œå¤œé—´æ¨¡å¼åˆ‡æ¢"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="è®¾ç½®"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="å‰å¾€è¯„è®º"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><div class="js-pjax"><script>(() => {
  let initFn = window.walineFn || null
  const isShuoshuo = GLOBAL_CONFIG_SITE.pageType === 'shuoshuo'
  const option = {"pageSize":8,"meta":["nick","mail","link"],"requiredMeta":["nick","mail"],"locale":{"sofa":"è¿™é‡Œå†·å†·æ¸…æ¸…çš„ï¼Œå¿«æ¥ç•™ä¸‹è„šå°å§ï¼"}}

  const destroyWaline = ele => ele.destroy()

  const initWaline = (Fn, el = document, path = window.location.pathname) => {
    const waline = Fn({
      el: el.querySelector('#waline-wrap'),
      serverURL: 'https://waline.lazyiones.top',
      pageview: false,
      dark: 'html[data-theme="dark"]',
      comment: false,
      ...option,
      path: isShuoshuo ? path : (option && option.path) || path
    })

    if (isShuoshuo) {
      window.shuoshuoComment.destroyWaline = () => {
        destroyWaline(waline)
        if (el.children.length) {
          el.innerHTML = ''
          el.classList.add('no-comment')
        }
      }
    }
  }

  const loadWaline = (el, path) => {
    if (initFn) initWaline(initFn, el, path)
    else {
      btf.getCSS('https://cdn.jsdelivr.net/npm/@waline/client/dist/waline.min.css')
        .then(() => import('https://cdn.jsdelivr.net/npm/@waline/client/dist/waline.min.js'))
        .then(({ init }) => {
          initFn = init || Waline.init
          initWaline(initFn, el, path)
          window.walineFn = initFn
        })
    }
  }

  if (isShuoshuo) {
    'Waline' === 'Waline'
      ? window.shuoshuoComment = { loadComment: loadWaline } 
      : window.loadOtherComment = loadWaline
    return
  }

  if ('Waline' === 'Waline' || !true) {
    if (true) btf.loadComment(document.getElementById('waline-wrap'),loadWaline)
    else setTimeout(loadWaline, 0)
  } else {
    window.loadOtherComment = loadWaline
  }
})()</script></div><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-nest.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">æœç´¢</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  æ•°æ®åŠ è½½ä¸­</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="æœç´¢æ–‡ç« " type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>